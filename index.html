<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Animated Portfolio Intro</title>
    <link rel="icon" type="image/png" href="assets/Favicon.png">
    <script src="https://cdn.tailwindcss.com"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&family=Montserrat:wght@700&display=swap');

        /* ------------------------------
           Base Styles (Defaults)
           ------------------------------ */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0B0C1E;
            margin: 0;
            overflow: hidden;
            /* Fixed: Use dvh for mobile consistency, fallback to vh */
            height: 100vh;
            height: 100dvh; 
        }

        .font-montserrat { 
            font-family: 'Montserrat', sans-serif; 
        }

        .grid-background {
            background-color: #0B0C1E;
            background-image:
                linear-gradient(to bottom, rgba(240, 244, 248, 0.08) 1px, transparent 1px),
                linear-gradient(to right, rgba(240, 244, 248, 0.08) 1px, transparent 1px);
            background-size: 100px 100px;
            
            /* Fixed: Ensure container fits mobile screens perfectly */
            width: 100%;
            height: 100vh; 
            height: 100dvh; 
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: space-between; /* Keeps title top, image bottom */
            text-align: center;
        }

        .slide-up { 
            animation: slideUp 1.3s ease-out forwards; 
        }

        .cursor { 
            border-right: 3px solid rgba(255, 255, 255, 0.75); 
            animation: blink 0.8s infinite; 
        }

        .portrait-img { 
            opacity: 0; 
            height: auto;
            display: block;
            margin-top: auto; 
            margin-bottom: 0 !important; 

            /* FIX: Added max-height and width auto to prevent cropping on laptops */
            max-height: 70vh; 
            width: auto;      
            object-fit: contain;
        }
        
        /* Animations */
        @keyframes slideUp {
            0% { transform: translateY(100px); opacity: 0; }
            100% { transform: translateY(0); opacity: 1; }
        }

        @keyframes blink {
            0%, 100% { border-color: transparent; }
            50% { border-color: rgba(255, 255, 255, 0.75); }
        }

        @keyframes slideToEdge {
            0% { transform: translateX(0); opacity: 1; }
            100% { transform: translateX(calc(50vw - 200px)); opacity: 1; }
        }
        .slide-right-edge { 
            animation: slideToEdge 1.3s ease-in-out forwards; 
        }

        /* =========================================
           RESPONSIVE MEDIA QUERIES
           ========================================= */

        /* 0 - 480 : Extra Small Phones */
        @media (min-width: 0px) and (max-width: 480px) {
            .title-responsive { font-size: 40px; margin-top: 15vh; } 
            /* Changed width to max-width to respect height constraint */
            .portrait-img { max-width: 95%; } 
        }

        /* 481 - 600 : Small Phones */
        @media (min-width: 481px) and (max-width: 600px) {
            .title-responsive { font-size: 35px; margin-top: 12vh; }
            .portrait-img { max-width: 80%; } 
        }

        /* 601 - 768 : Large Phones */
        @media (min-width: 601px) and (max-width: 768px) {
            .title-responsive { font-size: 40px; margin-top: 10vh; }
            .portrait-img { max-width: 70%; }
        }

        /* 769 - 992 : Tablets */
        @media (min-width: 769px) and (max-width: 992px) {
            .title-responsive { font-size: 55px; margin-top: 12vh; }
            .portrait-img { max-width: 50%; max-height: 60vh; } /* Stricter height for tablets */
        }

        /* 993 - 1200 : Small Laptops */
        @media (min-width: 993px) and (max-width: 1200px) {
            .title-responsive { font-size: 60px; margin-top: 8vh; }
            .portrait-img { max-width: 45%; max-height: 70vh; }
        }

        /* 1201 - 1400 : Desktops */
        @media (min-width: 1201px) and (max-width: 1400px) {
            .title-responsive { font-size: 70px; margin-top: 5vh; }
            .portrait-img { max-width: 40%; max-height: 75vh; }
        }

        /* 1401+ : Ultra-Wide Screens */
        @media (min-width: 1401px) {
            .title-responsive { font-size: 80px; margin-top: 8vh; }
            .portrait-img { max-width: 35%; max-height: 80vh; }
        }

    </style>
</head>

<body>
    <div class="grid-background">
        <h1 id="animatedText" class="text-white font-extrabold font-montserrat title-responsive">
            Welcome to My Portfolio
        </h1>

        <img id="portraitImage" src="./assets/MY_PORTRAIT.png" alt="My Portrait"
            class="portrait-img">
    </div>

    <script>
        const text = "Welcome to My Portfolio";
        const textElement = document.getElementById("animatedText");
        const image = document.getElementById("portraitImage");
        textElement.textContent = "";
        textElement.classList.add("cursor");
        let i = 0;
        const isMobile = window.matchMedia("(max-width: 768px)").matches;

        function typeWriter() {
            if (i < text.length) {
                textElement.textContent += text.charAt(i);
                i++;
                setTimeout(typeWriter, 70);
            } else {
                textElement.classList.remove("cursor");
                setTimeout(() => {
                    if (isMobile) {
                        const container = document.querySelector(".grid-background");
                        container.style.transition = "transform 1s ease-in-out, opacity 0.8s ease";
                        container.style.transform = "translateY(-100vh)";
                        container.style.opacity = "0";
                        setTimeout(() => {
                            window.location.href = "home.html?fromSplash=true";
                        }, 1000);
                    } else {
                        image.classList.add("slide-right-edge");
                        image.addEventListener("animationend", () => {
                            window.location.href = "home.html?fromSplash=true";
                        }, { once: true });
                    }
                }, 1000);
            }
        }

        window.addEventListener("load", () => {
            typeWriter();
            image.classList.add("slide-up");
            image.style.opacity = "1";
        });
        // --- CUSTOM TRACKING SCRIPT ---
document.addEventListener("DOMContentLoaded", function() {
    const trackingData = {
        page: window.location.pathname + window.location.hash,
        log: "Page Loaded"
    };

    fetch('https://my-portfolio-hd4y.onrender.com/track_visit', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json'
        },
        body: JSON.stringify(trackingData)
    })
    .then(response => response.json())
    .then(data => console.log("Tracking Active:", data))
    .catch(error => console.error("Tracking Error:", error));
});
    </script>
</body>
</html>